/**
 * @author Ã’scar Casajuana a.k.a. elboletaire <elboletaire at underave dot net>
 * @link https://github.com/elboletaire/password-strength-meter
 * @license GPL-3.0
 */
!function(h){"use strict";function t(o,l){function c(e,t){for(var s="",r=!1,a=0;a<t.length;a++){r=!0;for(var n=0;n<e&&n+a+e<t.length;n++)r=r&&t.charAt(n+a)===t.charAt(n+a+e);n<e&&(r=!1),r?(a+=e-1,r=!1):s+=t.charAt(a)}return s}return l=h.extend({},{shortPass:"The password is too short",badPass:"Weak; try combining letters & numbers",goodPass:"Medium; try using special characters",strongPass:"Strong password",containsField:"The password contains your username",enterPass:"Type your password",noDigit:"A digit is required",noUpperLetter:"An uppercase letter is required",noLowerLetter:"A lowercase letter is required",showPercent:!1,showText:!0,animate:!0,animateSpeed:"fast",field:!1,fieldPartialMatch:!0,minimumLength:4,closestSelector:"div",requiresDigit:!1,requiresUpperLetter:!1,requiresLowerLetter:!1},l),function(){var e=!0,a=l.showText,n=l.showPercent,t=h("<div>").addClass("pass-graybar"),i=h("<div>").addClass("pass-colorbar"),s=h("<div>").addClass("pass-wrapper").append(t.append(i));return o.closest(l.closestSelector).addClass("pass-strength-visible"),l.animate&&(s.css("display","none"),e=!1,o.closest(l.closestSelector).removeClass("pass-strength-visible")),l.showPercent&&(n=h("<span>").addClass("pass-percent").text("0%"),s.append(n)),l.showText&&(a=h("<span>").addClass("pass-text").html(l.enterPass),s.append(a)),o.closest(l.closestSelector).append(s),o.keyup(function(){var e=l.field||"";e=e&&h(e).val();var t=function(e,t){var s=0;if(e.length<l.minimumLength)return-1;if(l.field){if(e.toLowerCase()===t.toLowerCase())return-2;if(l.fieldPartialMatch&&t.length){var r=new RegExp(t.toLowerCase());if(e.toLowerCase().match(r))return-2}}if(l.requiresDigit&&!e.match(/[0-9]/))return-3;if(l.requiresUpperLetter&&!e.match(/[A-Z]/))return-4;if(l.requiresLowerLetter&&!e.match(/[a-z]/))return-5;s+=4*e.length,s+=c(1,e).length-e.length,s+=c(2,e).length-e.length,s+=c(3,e).length-e.length,s+=c(4,e).length-e.length,e.match(/(.*[0-9].*[0-9].*[0-9])/)&&(s+=5);var a=".*[!,@,#,$,%,^,&,*,?,_,~]";return a=new RegExp("("+a+a+")"),e.match(a)&&(s+=5),e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(s+=10),e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&(s+=15),e.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&e.match(/([0-9])/)&&(s+=15),e.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&e.match(/([a-zA-Z])/)&&(s+=15),(e.match(/^\w+$/)||e.match(/^\d+$/))&&(s-=10),100<s&&(s=100),s<0&&(s=0),s}(o.val(),e);o.trigger("password.score",[t]);var s=t<0?0:t;if(i.css({backgroundPosition:"0px -"+s+"px",width:s+"%"}),l.showPercent&&n.html(s+"%"),l.showText){var r=function(e){return-1===e?l.shortPass:-2===e?l.containsField:-3===e?l.noDigit:-4===e?l.noUpperLetter:-5===e?l.noLowerLetter:(e=e<0?0:e)<34?l.badPass:e<68?l.goodPass:l.strongPass}(t);!o.val().length&&t<=0&&(r=l.enterPass),a.html()!==h("<div>").html(r).html()&&(a.html(r),o.trigger("password.text",[r,t]))}}),l.animate&&(o.focus(function(){e||s.slideDown(l.animateSpeed,function(){e=!0,o.closest(l.closestSelector).addClass("pass-strength-visible")})}),o.blur(function(){!o.val().length&&e&&s.slideUp(l.animateSpeed,function(){e=!1,o.closest(l.closestSelector).removeClass("pass-strength-visible")})})),this}.call(this)}h.fn.password=function(e){return this.each(function(){new t(h(this),e)})}}(jQuery);